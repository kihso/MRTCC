This directory contains the files for running WT_Perf to get Cp and Ct tables for the NREL 5MW wind turbine
Created by Mikael Svenstrup - Aalborg University 2013

1. Run the batch script run_WT_Perf.bat to generate output files for Cp and Ct.
2. Move Power and Thrust data to separate files (make sure to remove headers, otherwise MATLAB cannot read it)
3. Run the matlab script ../nrelvals.m in the parent folder to obtain structs containing the parameters for the turbine.

Some miscellaneous comments:
The airfoils and the basis for the configuration files are obtained from this discussion:
https://wind.nrel.gov/forum/wind/viewtopic.php?f=2&t=582
Note that to be able to run with the newest version of WT_Perf, you need to remove the newline characters in the airfoil files. (It took me some time to figure this out). It has been done in the airfoil files placed here.


The batch file should run using both version 310 and 3.05 of WT_Perf. (Note that 3.05 is newer than 310 for some reason)

The configuration is in the *.wtp files

Note on the configurations:
In version 3.10, setting swirl to true or false makes a large difference in the result. It should generally be true, but it will take longer time to run. It will also generate more non converging cases if set to true. 
Running version 3.05 takes much longer time with swirl enabled. However, it gives identical results with and without swirl, so it can be disabled.

The configuration files are set to generate both power and thrust output in the same file, which you have to move to separate files. It could also be changed to output in separate files, if you wish. But then WT_Perf would have to be run twice.

The rotation speed does not matter. It will generate identical tables (at least down to the last digit). Here 12 rpm is chosen, which is close to nominal speed. 

You will get a few non-converging points if you are running version 310. They will show up as -9.9999 in the Cp table. (It is fixed by interpolation in the matlab script)

It does not matter what value of rho (air density) you choose for calculation of Cp. It does change the thrust calculated. But when doing the reverse calculation to get Ct, then (if using the same rho used in WT_Perf) you will get identical results.


The output is generated in *.out files.
To be able to read them by matlab, you need to remove the headers, which look like this:

Results generated by WT_Perf (v3.10b-mlb, 02-Jul-2004) for input file "NRELOffshrBsline5MW_WTPref310.wtp".
Generated on 07-Nov-2013 at 17:09:07.
Input file title:
  NREL 5.0 MW Baseline Wind Turbine for Use in Offshore Analysis.
 
--------------------------------------------------------------------------------
Cp (-) for Omega = 12 rpm.

  Pitch   TSR (   )
  (deg)      0.100      0.200      0.300      0.400      0.500      0.600      0.700      0.800      0.900      1.000      1.100      1.200      1.300 ....................

Remove all the initial lines and save to a new file (see name in matlab script). Remember to replace (deg) with a number. Otherwise you will get an error because the first line contains one number less than the following lines. I have replaced with the rpm value of 12, such that this also can be extracted from the file.

Also find the Ct table halfway down and copy this table to a separate file.


